<section xml:id="sec-if-statements">
	<title><pf>if</pf> statements</title>

	<p>
		Now that we know how to ask "yes" or "no" questions in code, we are ready to discuss how to control which tasks we want to perform.  We have been referring to this as <em>Flow 2</em>, where our code splits toward one flow path or another.  This "splitting" of the flow is accomplished with an <pf>if</pf>-statement.
	</p>

	<aside>
		<image source="images/flow-control-chart-subimage2.svg"/>
	</aside>
	
	<assemblage xml:id="if-statement-def">
		<title><pf>if</pf>-statement</title><p/>
			<p>
				Suppose you want your code to perform only one of the following tasks:
			</p>
			
			<sidebyside widths="65% 25%" valign="middle">
				<tabular>
					<col  width="100%"></col>
					<row><cell>task A if <pf>condition_1</pf> is <pf>true</pf></cell></row>
					<row><cell></cell></row>
					<row><cell></cell></row>
					<row><cell>task B if <pf>condition_2</pf> is <pf>true</pf></cell></row>
					<row><cell></cell></row>
					<row><cell></cell></row>
					<row><cell>task C if <pf>condition_3</pf> is <pf>true</pf></cell></row>
					<row><cell></cell></row>
					<row><cell></cell></row>
					<row><cell>task D if none of the above are <pf>true</pf></cell></row>
					<row><cell></cell></row>
					<row><cell></cell></row>
				</tabular>
				
				<image xml:id="if-statement-fig1">
					<latex-image>
						\begin{tikzpicture}
							\definecolor{darkgreen}{rgb}{0.0, 0.5, 0.0}

							\node [rect node 2]                 (00) at (0, 4.5) {};
							\node [rect node 2]                 (10) at (0, 4) {};
							\node                               (100) at (1.5, 4.2) {$\texttt{\color{blue}condition\_1}$};
							\node [rect node 2, draw=blue]      (11) at (3.7, 4) {\color{blue}task A};
							\node [rect node 2]                 (20) at (0, 3) {};
							\node                               (200) at (1.5, 3.2) {$\texttt{\color{red}condition\_2}$};
							\node [rect node 2, draw=red]       (21) at (3.7, 3) {\color{red}task B};
							\node [rect node 2]                 (30) at (0, 2) {};
							\node                               (300) at (1.5, 2.2) {$\texttt{\color{darkgreen}condition\_3}$};
							\node [rect node 2, draw=darkgreen] (31) at (3.7, 2) {\color{darkgreen}task C};
							\node [rect node 2]                 (40) at (0, 1) {};
							\node                               (400) at (1.5, 1.2) {$\texttt{\color{orange}otherwise}$};
							\node [rect node 2, draw=orange]    (41) at (3.7, 1) {\color{orange}task D};
							\node [rect node 2]                 (50) at (0, 0.5) {};
							
							\draw [draw=black, line width=0.3mm]          (00.south) to (10.north);
							\draw [-&gt;,draw=blue, line width=0.3mm]        (10.east) to  (11.west);
							\draw [draw=black, line width=0.3mm]          (10.south) to (20.north);
							\draw [-&gt;,draw=red, line width=0.3mm]         (20.east) to  (21.west);
							\draw [draw=black, line width=0.3mm]          (20.south) to (30.north);
							\draw [-&gt;,draw=darkgreen, line width=0.3mm]   (30.east) to  (31.west);
							\draw [draw=black, line width=0.3mm]          (30.south) to (40.north);
							\draw [-&gt;,draw=orange, line width=0.3mm]      (40.east) to  (41.west);
							\draw [-&gt;,draw=black, line width=0.3mm]       (40.south) to (50.north);
						\end{tikzpicture}
					</latex-image>
				</image>
			</sidebyside>

			<p>
				Then the MATLAB commands needed for this flow are
			</p>
	
			<sidebyside width="100%">
				<program language="matlab">
					<code>
						if question A
							%    ⤷ true? ➜ do task A, then skip to end
							%    ⤷ false? ➜ go to next question
							task A
						elseif question B
							%    ⤷ true? ➜ do task B, then skip to end
							%    ⤷ false? ➜ go to next question
							task B
						elseif question C
							%    ⤷ true? ➜ do task C, then skip to end
							%    ⤷ false? ➜ go to next question
							task C
						else
							%    do default task
							default task
						end
					</code>
				</program>
			</sidebyside>

	</assemblage>

	<aside>
		<p>
			This if-statement shows four branches, but there can be as many as you like. You would just add additional <pf>elseif</pf> statements between the <pf>if</pf> and <pf>else</pf> statements.
		</p>
	</aside>

	<p>
		Using this structure, MATLAB performs ONLY one task. The task that is applied is based on the FIRST question that is true. The rest of the tasks are ignored.
	</p>

	<p>
		For example, suppose that <pf>question A</pf> is <pf>false</pf>, but both <pf>question B</pf> and <pf>question C</pf> are <pf>true</pf>. In this case, only <pf>task B</pf> commands are run and the code jumps directly to the <pf>end</pf> line, skipping past <pf>question C</pf>.
	</p>

	<example xml:id="example-if-else">
		<title><pf>if-else</pf></title>

		<statement>
			<p>
				Suppose <pf>num</pf> is a <pf>1 x 1 double</pf>. Write a code block that increases <pf>num</pf> by 5 if it is greater than 10 and decreases it by 5 otherwise.
			</p>
		</statement>

		<solution>
			<p> 
				<program language="matlab">
					<code>
						num = 68;
						if num > 10
							num = num + 5;
						else
							num = num - 5;
						end
					</code>
				</program>
			</p>
		</solution>

		<solution>
			<title>With Commentary</title>
			<p>
				<program language="matlab">
					<code>
						num = 68;
						fprintf("Since num = " + num + ", we ")
						if num > 10
							num = num + 5;
							fprintf("add 5 to get num = " + num + "\n")
						else
							num = num - 5;
							fprintf("subtract 5 to get num = " + num + "\n")
						end
					</code>
				</program>
			</p>
		</solution>
	</example>

	<example xml:id="ex-optional-else">
		<title>Optional <pf>else</pf></title>

		<statement>
			<p>
				Suppose <pf>num</pf> is a <pf>1 x 1 double</pf>. Write a code block that increases <pf>num</pf> by 5 if it is greater than 10 and decreases it by 5 otherwise.
			</p>
			<p>
				Suppose <pf>x</pf> contains a numeric value. Write a script that increases <pf>x</pf> by 5 if it is greater than 10, decreases <pf>x</pf> by 5 if it is less than 10, and does nothing if <pf>x</pf> is zero.
			</p>
		</statement>

		<solution>
			<p>
				If <pf>x = 0</pf>, the below script runs the commands <pf>x = x - 5</pf> and <pf>disp(x)</pf>, outputting <pf>-5</pf>. However, if <pf>x = 10</pf>, only the <pf>disp(x)</pf> command is run, producing an output of <pf>10</pf>.
			</p>

			<program language="matlab">
				<code>
					if x &gt; 10
						x = x + 5;
					elseif x &lt; 10
						x = x - 5;
					end
					disp(x)
				</code>
			</program>
		</solution>
	</example>

	<example xml:id="example-if-elseif-else">
		<title><pf>if-elseif-else</pf></title>

		<statement>
			<p>
				<ol marker="(a)">
					<li>
						<p>
							Suppose <pf>v</pf> is a <pf>1 x 3 double</pf>. Write a code block that sets <pf>k</pf> to the index location of the first positive number inside <pf>v</pf>. If there are no positive numbers then set <pf>k = -1</pf>.
						</p>
					</li>
					<li>
						<p>
							How does the code change if <pf>k</pf> is the index of the last positive number in <pf>v</pf> instead of the first?
						</p>
					</li>
				</ol>
			</p>
		</statement>

		<solution>
			<p> 
				The logic is as follows: 
				<ul>
					<li>"if the 1st value positive, then set k = 1",</li>
					<li>"if the 2nd value positive, then set k = 2",</li>
					<li>"is the 3rd value positive, then set k = 3",</li>
					<li>"otherwise, set k = -1"</li>
				</ul>
			</p>

			<p>
				In code, this likes like:
				<program language="matlab">
					<code>
						v = [-3 5 1];
						if v(1) > 0
							k = 1;
						elseif v(2) > 0
							k = 2;
						elseif v(3) > 0
							k = 3;
						else
							k = -1;
						end
						disp(k)
					</code>
				</program>
			</p>

			<p>
				Running this code block displays <pf>k = 2</pf>.
			</p>
		</solution>

		<solution>
			<p> 
				Recall that MATLAB only runs the commands of the FIRST TRUE branch of the if-statement and ignores all rest. Here are two reasonable approaches:

				<dl width="narrow">
					<li>
						<title>Approach 1</title>
						<p>
							<program language="matlab">
								<code>
									% Reverse the order
									v = [-3 5 1];

									if v(3) > 0
										k = 3;
									elseif v(2) > 0
										k = 2;
									elseif v(1) > 0
										k = 1;
									else
										k = -1;
									end
									disp(k)
								</code>
							</program>
						</p>
					</li>
					<li>
						<title>Approach 2</title>
						<p>
							<program language="matlab">
								<code>
									% Split the ifs
									v = [-3 5 1];
									k = -1;		% set the default k

									if v(1) > 0
										k = 1;	% override k if true
									end

									if v(2) > 0
										k = 2;	% override k if true
									end
									
									if v(3) > 0
										k = 3;	% override k if true
									end
									disp(k)
								</code>
							</program>
						</p>
					</li>
				</dl>
			</p>
		</solution>

	</example>

</section>


